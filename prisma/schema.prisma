// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
  binaryTargets = ["native", "linux-musl-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  USR_UserId  Int @id @default(autoincrement())
  USR_Username String @unique
  USR_Name String
  USR_Password String
  USR_Address String
  USR_Seller Boolean
  products Product[]
  shopping Sale[]
  shoppingCarts shoppingCart[]

  @@map("users")
}

model Product {
  PRD_ProductId Int @id @default(autoincrement())
  PRD_Price Int
  PRD_Name String
  PRD_stock Int
  PRD_Seller Int
  user User @relation(fields: [PRD_Seller], references: [USR_UserId])
  sales Sale[] @relation("salesProducts")
  shoppingCarts shoppingCart[]

  @@map("products")
}

model Sale {
  SLE_SaleId Int @id @default(autoincrement())
  SLE_DateSale DateTime @default(now())
  SLE_buyer Int
  user User @relation(fields: [SLE_buyer], references: [USR_UserId])
  products Product[] @relation("salesProducts")
}

model shoppingCart {
  SHP_ShoppingCartId Int @id @default(autoincrement())
  SHP_UserID Int
  SHP_ProductId Int
  user User @relation(fields: [SHP_ShoppingCartId], references: [USR_UserId])
  product Product @relation(fields: [SHP_ProductId], references: [PRD_ProductId])
}
